import{_ as i,r as t,o as c,c as p,a as s,b as a,d as n,w as l,f as o}from"./app-314de074.js";const d={},m=o(`<h2 id="一、卸载mysql" tabindex="-1"><a class="header-anchor" href="#一、卸载mysql" aria-hidden="true">#</a> 一、卸载Mysql</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove mysql* <span class="token parameter variable">-y</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/my.cnf
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/mysql/
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/log/mysqld.log
<span class="token function">find</span> / <span class="token parameter variable">-name</span> mysql
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、安装mysql" tabindex="-1"><a class="header-anchor" href="#二、安装mysql" aria-hidden="true">#</a> 二、安装Mysql</h2>`,3),u={href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"},v=o(`<figure><img src="https://steven-kz.github.io/BlogImgs/imgaes/mysql/7.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">groupadd</span> mysql
<span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-g</span> mysql mysql
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span>  /home/mysql              <span class="token comment">#创建目录</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span>  /home/mysql/data         <span class="token comment">#创建目录</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span>  /home/mysql/logs         <span class="token comment">#创建目录</span>
<span class="token function">chown</span> mysql:mysql <span class="token parameter variable">-R</span> /home/mysql   <span class="token comment">#赋予权限</span>
<span class="token function">chown</span> mysql:mysql <span class="token parameter variable">-R</span> /home/mysql/logs   <span class="token comment">#赋予权限</span>
<span class="token function">chown</span> mysql:mysql <span class="token parameter variable">-R</span> /home/mysql/data   <span class="token comment">#赋予权限</span>
<span class="token builtin class-name">cd</span> /usr/local
<span class="token function">tar</span> <span class="token parameter variable">-xvf</span> mysql-8.0.32-linux-glibc2.12-x86_64.tar.xz
<span class="token function">mv</span> mysql-8.0.32-linux-glibc2.12-x86_64 /usr/local/mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-1-配置文件" tabindex="-1"><a class="header-anchor" href="#_2-1-配置文件" aria-hidden="true">#</a> 2.1 配置文件</h3><p>vim /etc/my.cnf</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
bind-address<span class="token operator">=</span><span class="token number">0.0</span>.0.0
<span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">3306</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">basedir</span><span class="token operator">=</span>/usr/local/mysql           <span class="token comment">#安装路径</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/home/mysql/data      <span class="token comment">#数据存储路径    </span>
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/home/mysql/data/mysql.sock
<span class="token assign-left variable">mysqlx_socket</span><span class="token operator">=</span>/home/mysql/data/mysqlx.sock
log-error<span class="token operator">=</span>/home/mysql/logs/mysql.log
pid-file<span class="token operator">=</span>/home/mysql/logs/mysql.pid
<span class="token comment">#character config</span>
<span class="token assign-left variable">character_set_server</span><span class="token operator">=</span>utf8mb4
symbolic-links<span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">explicit_defaults_for_timestamp</span><span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#初始化密码</span>
<span class="token builtin class-name">cd</span> /usr/local/mysql/bin/
./mysqld --defaults-file<span class="token operator">=</span>/etc/my.cnf <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/home/mysql/data <span class="token parameter variable">--user</span><span class="token operator">=</span>mysql <span class="token parameter variable">--initialize</span>
<span class="token function">cat</span> /home/mysql/logs/mysql.log
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-配置开机自启" tabindex="-1"><a class="header-anchor" href="#_2-2-配置开机自启" aria-hidden="true">#</a> 2.2 配置开机自启</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> /usr/local/mysql/support-files/mysql.server /etc/init.d/mysql
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /etc/init.d/mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,8),b=o(`<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>
<span class="token assign-left variable">Description</span><span class="token operator">=</span>MySQL Community Server
<span class="token assign-left variable">After</span><span class="token operator">=</span>network.target

<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>forking
<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/etc/init.d/mysql start
<span class="token assign-left variable">ExecStop</span><span class="token operator">=</span>/etc/init.d/mysql stop
<span class="token assign-left variable">ExecReload</span><span class="token operator">=</span>/etc/init.d/mysql restart
<span class="token assign-left variable">User</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">Group</span><span class="token operator">=</span>mysql
<span class="token assign-left variable">Restart</span><span class="token operator">=</span>on-failure

<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>
<span class="token assign-left variable">WantedBy</span><span class="token operator">=</span>multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#刷新配置</span>
systemctl daemon-reload
systemctl <span class="token builtin class-name">enable</span> mysqld.service
systemctl start mysqld	
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-配置环境变量" tabindex="-1"><a class="header-anchor" href="#_2-3-配置环境变量" aria-hidden="true">#</a> 2.3 配置环境变量</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 若为空则添加环境变量</span>
<span class="token function">whereis</span> mysql<span class="token punctuation">;</span>
<span class="token function">whereis</span> mysqldump<span class="token punctuation">;</span>

<span class="token function">vi</span> /etc/profile
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/usr/local/mysql/bin
<span class="token builtin class-name">source</span> /etc/profile

<span class="token comment">#修改密码</span>
mysql <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token parameter variable">--socket</span><span class="token operator">=</span>/home/mysql/data/mysql.sock

ALTER <span class="token environment constant">USER</span> <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> IDENTIFIED WITH mysql_native_password BY <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>
<span class="token comment"># 配置远程连接</span>
use mysql<span class="token punctuation">;</span>
update user <span class="token builtin class-name">set</span> <span class="token assign-left variable">host</span><span class="token operator">=</span><span class="token string">&#39;%&#39;</span> where <span class="token assign-left variable">user</span><span class="token operator">=</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span>
flush privileges<span class="token punctuation">;</span>

<span class="token comment">#配置防火墙</span>
firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp <span class="token parameter variable">--permanent</span>
firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>说明</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql     <span class="token number">18092</span>      <span class="token number">1</span>  <span class="token number">0</span> <span class="token number">18</span>:56 ?        00:00:00 /bin/sh /usr/local/mysql/bin/mysqld_safe <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/home/mysql/data --pid-file<span class="token operator">=</span>/home/mysql/logs/mysql.pid
mysql     <span class="token number">18322</span>  <span class="token number">18092</span>  <span class="token number">0</span> <span class="token number">18</span>:56 ?        00:00:03 /usr/local/mysql/bin/mysqld <span class="token parameter variable">--basedir</span><span class="token operator">=</span>/usr/local/mysql <span class="token parameter variable">--datadir</span><span class="token operator">=</span>/home/mysql/data --plugin-dir<span class="token operator">=</span>/usr/local/mysql/lib/plugin --log-error<span class="token operator">=</span>/home/mysql/logs/mysql.log --pid-file<span class="token operator">=</span>/home/mysql/logs/mysql.pid <span class="token parameter variable">--socket</span><span class="token operator">=</span>/home/mysql/data/mysql.sock <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">3306</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,6),k=s("code",null,'**<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld_safe</font>**',-1),g=s("code",null,'<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld</font>',-1),y=s("code",null,'<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld_safe</font>',-1),h=s("code",null,'<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld</font>',-1),f=s("code",null,'**<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld</font>**',-1),q=s("code",null,'<font style="color:rgb(36, 41, 47);background-color:rgb(244, 246, 248);">mysqld</font>',-1);function _(x,w){const r=t("ExternalLinkIcon"),e=t("font");return c(),p("div",null,[m,s("p",null,[s("a",u,[a("https://downloads.mysql.com/archives/community/"),n(r)])]),v,s("p",null,[a("vim "),n(e,{style:{color:"rgb(36, 41, 47)"}},{default:l(()=>[a("/etc/systemd/system/mysqld.service")]),_:1})]),b,s("ol",null,[s("li",null,[k,s("strong",null,[n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 进程")]),_:1})]),n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a("： 这是一个启动脚本，用于以安全模式启动 ")]),_:1}),g,n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 进程。")]),_:1}),y,n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 负责确保 MySQL 服务器在启动时能够处理某些可能的启动问题，比如重新启动 MySQL 服务器如果它崩溃了。这个进程一般负责启动实际的 ")]),_:1}),h,n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 进程，并监控它的状态。")]),_:1})]),s("li",null,[f,s("strong",null,[n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 进程")]),_:1})]),n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a("： 这是实际的 MySQL 服务器进程。它是处理所有数据库操作的核心进程。")]),_:1}),q,n(e,{style:{color:"rgb(36, 41, 47)","background-color":"rgb(244, 246, 248)"}},{default:l(()=>[a(" 进程在后台运行并处理所有的查询和数据操作。")]),_:1})])])])}const S=i(d,[["render",_],["__file","Mysql8.html.vue"]]);export{S as default};
